1.

CREATE OR REPLACE PROCEDURE CONFIRM_ORDER(
SLR_ID IN NUMBER,
CUS_ID IN NUMBER,
PROD_ID IN NUMBER,
PICKUP_ADDRESS IN VARCHAR2,
INP_QUANT IN NUMBER
) IS

	ORD_ID NUMBER;
	ITM_NO NUMBER;

BEGIN

	SELECT MAX(ORDER_ID) INTO ORD_ID
	FROM CUSTOMER_ORDER;
	ORD_ID := ORD_ID + 1;
	
	INSERT INTO CUSTOMER_ORDER VALUES(ORD_ID, SLR_ID, CUS_ID, SYSDATE, PICKUP_ADDRESS);
	
	FOR i IN 1..INP_QUANT 
	LOOP
			SELECT  GET_ITEM_NO(PRODUCT_ID) INTO ITM_NO FROM PRODUCT WHERE PRODUCT_ID=PROD_ID;
			INSERT INTO ORDERED_ITEMS VALUES(PROD_ID, SLR_ID, ORD_ID, ITM_NO);
	END LOOP;


END;



2.

CREATE OR REPLACE PROCEDURE ADD_PRODUCT(
PROD_NAME IN VARCHAR2,
SLR_ID IN NUMBER,
CAT_NAME IN VARCHAR2,
PROD_PRICE IN NUMBER,
QUANT IN NUMBER,
EXP_DEL IN VARCHAR2,
PROD_DES IN VARCHAR2
) IS

	PROD_ID NUMBER;
	TOT_PROD NUMBER;
	CAT_ID NUMBER;
	CNT NUMBER;
	
BEGIN

	SELECT COUNT(*) INTO TOT_PROD
	FROM PRODUCT;
	
	IF TOT_PROD=0 THEN
		PROD_ID := 1;
	ELSE
		SELECT MAX(PRODUCT_ID) INTO PROD_ID
		FROM PRODUCT;
		
		PROD_ID := PROD_ID + 1;
	END IF;
	
	SELECT CATEGORY_ID INTO CAT_ID
	FROM CATEGORY
	WHERE CATEGORY_NAME = CAT_NAME;

	INSERT INTO PRODUCT VALUES(PROD_ID, SLR_ID, PROD_NAME, CAT_ID, PROD_DES, EXP_DEL, PROD_PRICE);
	
	CNT := 0;
	FOR i IN 1..QUANT 
	LOOP
		CNT := CNT+1;
		INSERT INTO PRODUCT_UNIT VALUES(PROD_ID, SLR_ID, CNT, 'not sold');
	END LOOP;

	

END;


3.

CREATE OR REPLACE PROCEDURE EDIT_PRODUCT(
PROD_ID IN NUMBER,
QUANT IN NUMBER
) IS

	ITM_NO NUMBER;
	SLR_ID NUMBER;
	
BEGIN

	SELECT SELLER_ID INTO SLR_ID
	FROM PRODUCT
	WHERE PRODUCT_ID = PROD_ID;
	
	SELECT MAX(ITEM_NUMBER) INTO ITM_NO
	FROM PRODUCT_UNIT
	WHERE PRODUCT_ID = PROD_ID;
	
	FOR i IN 1..QUANT 
	LOOP
		ITM_NO := ITM_NO + 1;
		INSERT INTO PRODUCT_UNIT VALUES(PROD_ID, SLR_ID, ITM_NO, 'not sold');
	END LOOP;


END;