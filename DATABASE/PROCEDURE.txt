CREATE OR REPLACE PROCEDURE CONFIRM_ORDER(
SLR_ID IN NUMBER,
CUS_ID IN NUMBER,
PROD_ID IN NUMBER,
PICKUP_ADDRESS IN VARCHAR2
) IS

	ORD_ID NUMBER;
	ITM_NO NUMBER;

BEGIN

	SELECT MAX(ORDER_ID) INTO ORD_ID
	FROM CUSTOMER_ORDER;
	ORD_ID := ORD_ID + 1;
	
	INSERT INTO CUSTOMER_ORDER VALUES(ORD_ID, SLR_ID, CUS_ID, SYSDATE, PICKUP_ADDRESS);
	
	SELECT  GET_ITEM_NO(PRODUCT_ID) INTO ITM_NO FROM PRODUCT WHERE PRODUCT_ID=PROD_ID;
		
	INSERT INTO ORDERED_ITEMS VALUES(PROD_ID, SLR_ID, ORD_ID, ITM_NO);

END;


