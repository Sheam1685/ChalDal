CREATE OR REPLACE FUNCTION GET_ITEM_NO(PROD_ID IN NUMBER) 
RETURN NUMBER IS
	
	ITM_NO NUMBER;
	
BEGIN

	SELECT MIN(ITEM_NUMBER) INTO ITM_NO 
	FROM PRODUCT_UNIT 
	WHERE PRODUCT_ID=PROD_ID AND STATUS='not sold';
	RETURN ITM_NO;
	
EXCEPTION
	WHEN NO_DATA_FOUND THEN
		ITM_NO := -1;
	WHEN OTHERS THEN
		ITM_NO := -2;

END;
/